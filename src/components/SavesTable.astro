---
import type { SavingThrow } from "../js/Character";
import SaveRow from "./SaveRow.astro";

const { title, saves, advantage, character, proficiencyMultiplier, extraBonus = 0 } = Astro.props;
const savesList = saves ?? character.saves;
---

<table>
  <tr>
    <th colspan="2" style="text-align: center;" set:html={title} />
  </tr>
  <tr>
    <th>Save</th>
    <th class="modifier">Modifier</th>
  </tr>
  {
    savesList.map((save: SavingThrow) => {
      const proficiency = character.createProficiency(save.proficient, proficiencyMultiplier);
      const bonus = character.abilityModifier(save.save) + proficiency.bonus + extraBonus;
      return <SaveRow save={save} proficiency={proficiency} bonus={bonus} advantage={advantage} />;
    })
  }
</table>
